import{r as C,o as x,v as k,c as i,a as t,w as a,u as l,b as g,n as F,e as s,C as B,d as N,F as T,f as V,g as D,h as v,j as u,k as L,t as c}from"./index-C5PjdH1u.js";import{C as E}from"./CButton-CmOQe7lx.js";import{C as H}from"./CCardHeader-ZktOyhiF.js";import{C as S}from"./CFormInput-BqrKVkSy.js";import{C as j}from"./CSpinner-CajLDNd3.js";import{C as R,a as $,b as y,c as m,d as q,e as f}from"./CTable-BpxxO1kN.js";const z={class:"p-3"},A={key:0},I={key:1},M={key:0,class:"text-muted"},Y={__name:"FormulasList",setup(U){const _=C(!0),d=C([]),p=C("");x(async()=>{_.value=!0;try{const{data:o}=await v.get("/api/formulas",{withCredentials:!0});d.value=o||[]}finally{_.value=!1}});const b=k(()=>{const o=p.value.trim().toLowerCase();return o?d.value.filter(e=>[e.name,e.description,e.expression].some(r=>r==null?void 0:r.toLowerCase().includes(o))):d.value}),w=async o=>{confirm("Delete this formula?")&&(await v.delete(`/api/formulas/${o}`,{withCredentials:!0}),d.value=d.value.filter(e=>e.id!==o))};return(o,e)=>{const r=F("router-link");return u(),i("div",z,[t(l(D),null,{default:a(()=>[t(l(H),{class:"fw-semibold d-flex justify-content-between align-items-center"},{default:a(()=>[e[2]||(e[2]=g("span",null,"Formula Library",-1)),t(r,{class:"btn btn-sm btn-primary",to:{name:"FormulaCreate"}},{default:a(()=>e[1]||(e[1]=[s("New Formula",-1)])),_:1,__:[1]})]),_:1,__:[2]}),t(l(B),null,{default:a(()=>[t(l(S),{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=n=>p.value=n),placeholder:"Search...",class:"mb-3"},null,8,["modelValue"]),_.value?(u(),i("div",A,[t(l(j))])):(u(),i("div",I,[t(l(R),{hover:"",responsive:""},{default:a(()=>[t(l($),null,{default:a(()=>[t(l(y),null,{default:a(()=>[t(l(m),null,{default:a(()=>e[3]||(e[3]=[s("Name",-1)])),_:1,__:[3]}),t(l(m),null,{default:a(()=>e[4]||(e[4]=[s("Expression",-1)])),_:1,__:[4]}),t(l(m),null,{default:a(()=>e[5]||(e[5]=[s("Description",-1)])),_:1,__:[5]}),t(l(m),null,{default:a(()=>e[6]||(e[6]=[s("Actions",-1)])),_:1,__:[6]})]),_:1})]),_:1}),t(l(q),null,{default:a(()=>[(u(!0),i(T,null,V(b.value,n=>(u(),L(l(y),{key:n.id},{default:a(()=>[t(l(f),null,{default:a(()=>[s(c(n.name),1)]),_:2},1024),t(l(f),{class:"text-truncate",style:{"max-width":"360px"}},{default:a(()=>[s(c(n.expression),1)]),_:2},1024),t(l(f),{class:"text-truncate",style:{"max-width":"360px"}},{default:a(()=>[s(c(n.description||"â€”"),1)]),_:2},1024),t(l(f),null,{default:a(()=>[t(r,{class:"btn btn-sm btn-outline-primary me-2",to:{name:"FormulaEdit",params:{id:n.id}}},{default:a(()=>e[7]||(e[7]=[s("Edit",-1)])),_:2,__:[7]},1032,["to"]),t(l(E),{color:"danger",size:"sm",onClick:J=>w(n.id)},{default:a(()=>e[8]||(e[8]=[s("Delete",-1)])),_:2,__:[8]},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),b.value.length===0?(u(),i("div",M,"No formulas yet.")):N("",!0)]))]),_:1})]),_:1})])}}};export{Y as default};
