import{r as v,o as M,c as m,b as l,a as s,w as a,u as e,g as f,C as _,R as w,e as o,k as B,t as p,h as V,j as d}from"./index-CvVN3E1C.js";import{C as R}from"./CAlert-DAtuXBMd.js";import{C as S}from"./CButton-BTssrhK7.js";import{C as c}from"./CCardHeader-BChnrtWq.js";import{a as y,C as j}from"./CRow-DVSi5Bvt.js";import{C as A}from"./CSpinner-BQ14nvNv.js";const z={class:"px-3 py-4"},E={key:0,class:"text-body-secondary d-flex align-items-center"},L={key:2,class:"text-body-secondary"},N={class:"mt-2"},D={key:0,class:"text-body-secondary d-flex align-items-center"},P={key:2,class:"text-body-secondary"},T={class:"mt-2"},$={__name:"Settings",setup(F){const C=v(null),x=v(null),r=v(!0),i=v("");async function k(u){const t=`/api/settings/${encodeURIComponent(u)}`,{data:n,status:b}=await V.get(t,{withCredentials:!0});return b===204||!n?null:n.setting_value??n.value??null}async function g(){var u,t;r.value=!0,i.value="";try{const[n,b]=await Promise.all([k("current_restore"),k("last_record_modification_date")]);C.value=n,x.value=b}catch(n){i.value=((t=(u=n==null?void 0:n.response)==null?void 0:u.data)==null?void 0:t.error)||(n==null?void 0:n.message)||"Failed to load settings."}finally{r.value=!1}}return M(g),(u,t)=>(d(),m("div",z,[t[14]||(t[14]=l("h1",{class:"h3 mb-4"},"Settings",-1)),s(e(j),{class:"g-4"},{default:a(()=>[s(e(y),{xs:"12",md:"6"},{default:a(()=>[s(e(f),null,{default:a(()=>[s(e(c),null,{default:a(()=>t[0]||(t[0]=[l("strong",null,"Comp Plan Template",-1),l("div",{class:"small text-body-secondary"}," Edit the EJS compensation statement template. ",-1)])),_:1,__:[0]}),s(e(_),{class:"d-flex justify-content-between align-items-center"},{default:a(()=>[t[2]||(t[2]=l("div",{class:"text-body-secondary"}," Manage the template used to render comp statements. ",-1)),s(e(w),{class:"btn btn-secondary btn-sm",to:{name:"CompPlanTemplate"}},{default:a(()=>t[1]||(t[1]=[o(" Open ",-1)])),_:1,__:[1]})]),_:1,__:[2]})]),_:1})]),_:1}),s(e(y),{xs:"12",md:"6"},{default:a(()=>[s(e(f),null,{default:a(()=>[s(e(c),null,{default:a(()=>t[3]||(t[3]=[l("strong",null,"DB Admin",-1),l("div",{class:"small text-body-secondary"}," Backup and restore database content. ",-1)])),_:1,__:[3]}),s(e(_),{class:"d-flex justify-content-between align-items-center"},{default:a(()=>[t[5]||(t[5]=l("div",{class:"text-body-secondary"}," Access administrative tools for the database. ",-1)),s(e(w),{class:"btn btn-secondary btn-sm",to:{name:"Admin"}},{default:a(()=>t[4]||(t[4]=[o(" Open ",-1)])),_:1,__:[4]})]),_:1,__:[5]})]),_:1})]),_:1}),s(e(y),{xs:"12",md:"6",mt:"3"},{default:a(()=>[s(e(f),null,{default:a(()=>[s(e(c),null,{default:a(()=>t[6]||(t[6]=[l("strong",null,"Version",-1)])),_:1,__:[6]}),s(e(_),{class:"d-flex justify-content-between align-items-center"},{default:a(()=>t[7]||(t[7]=[l("div",{class:"text-body-secondary"}," VarCAC version 1.00.05 ",-1)])),_:1,__:[7]})]),_:1})]),_:1}),s(e(y),{xs:"12",md:"6",mt:"3"},{default:a(()=>[s(e(f),null,{default:a(()=>[s(e(c),null,{default:a(()=>t[8]||(t[8]=[l("strong",null,"Imported Working File",-1)])),_:1,__:[8]}),s(e(_),{class:"w-100"},{default:a(()=>[r.value?(d(),m("div",E,[s(e(A),{size:"sm",class:"me-2"}),t[9]||(t[9]=o(" Loading… ",-1))])):i.value?(d(),B(e(R),{key:1,color:"danger",class:"mb-0"},{default:a(()=>[o(p(i.value),1)]),_:1})):(d(),m("div",L,p(C.value||"No restore recorded yet."),1)),l("div",N,[s(e(S),{size:"sm",color:"secondary",variant:"outline",disabled:r.value,onClick:g},{default:a(()=>t[10]||(t[10]=[o(" Refresh ",-1)])),_:1,__:[10]},8,["disabled"])])]),_:1})]),_:1})]),_:1}),s(e(y),{xs:"12",md:"6",mt:"3"},{default:a(()=>[s(e(f),null,{default:a(()=>[s(e(c),null,{default:a(()=>t[11]||(t[11]=[l("strong",null,"Last Record Modification Date",-1)])),_:1,__:[11]}),s(e(_),{class:"w-100"},{default:a(()=>[r.value?(d(),m("div",D,[s(e(A),{size:"sm",class:"me-2"}),t[12]||(t[12]=o(" Loading… ",-1))])):i.value?(d(),B(e(R),{key:1,color:"danger",class:"mb-0"},{default:a(()=>[o(p(i.value),1)]),_:1})):(d(),m("div",P,p(x.value||"—"),1)),l("div",T,[s(e(S),{size:"sm",color:"secondary",variant:"outline",disabled:r.value,onClick:g},{default:a(()=>t[13]||(t[13]=[o(" Refresh ",-1)])),_:1,__:[13]},8,["disabled"])])]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{$ as default};
