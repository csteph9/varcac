import{s as b,v as _,c as V,a as l,w as d,u as t,e as u,C as v,l as N,b as I,p as r,g as w,i as y,j as R,h as x}from"./index-CnunvlPX.js";import{C as n}from"./CButton-9cLZnGML.js";import{C as D}from"./CCardHeader-DkwIvcvh.js";import{C as S}from"./CForm-CUoL1i_i.js";import{C as i}from"./CFormInput-BDjYtHKv.js";import{C as A}from"./CFormTextarea-Bu0wAEvA.js";import{C as B,a as s}from"./CRow-D6jC7U_a.js";const U={class:"p-3"},g={class:"d-flex gap-2 mt-4"},H={__name:"SourceDataAdd",setup(E){const p=y(),a=b({participantId:"",label:"",description:"",date:"",value:""}),m=_(()=>!!a.participantId&&!!a.label&&!!a.date&&a.value!==""&&!Number.isNaN(Number(a.value)));async function f(){await x.post("/api/source-data",{participantId:Number(a.participantId),label:a.label.trim(),description:a.description||null,date:a.date,value:Number(a.value)},{withCredentials:!0}),alert("Record added"),p.push({name:"SourceDataList"})}function C(){a.participantId="",a.label="",a.description="",a.date="",a.value=""}return(F,e)=>(R(),V("div",U,[l(t(w),null,{default:d(()=>[l(t(D),{class:"fw-semibold"},{default:d(()=>e[5]||(e[5]=[u("Add Source Data",-1)])),_:1,__:[5]}),l(t(v),null,{default:d(()=>[l(t(S),{onSubmit:N(f,["prevent"])},{default:d(()=>[l(t(B),{class:"g-3"},{default:d(()=>[l(t(s),{md:"3"},{default:d(()=>[l(t(r),null,{default:d(()=>e[6]||(e[6]=[u("Participant ID",-1)])),_:1,__:[6]}),l(t(i),{modelValue:a.participantId,"onUpdate:modelValue":e[0]||(e[0]=o=>a.participantId=o),placeholder:"e.g., 101"},null,8,["modelValue"])]),_:1}),l(t(s),{md:"3"},{default:d(()=>[l(t(r),null,{default:d(()=>e[7]||(e[7]=[u("Label",-1)])),_:1,__:[7]}),l(t(i),{modelValue:a.label,"onUpdate:modelValue":e[1]||(e[1]=o=>a.label=o),placeholder:"NEW_ARR, EXPANSION, RETAIN_NR..."},null,8,["modelValue"])]),_:1}),l(t(s),{md:"3"},{default:d(()=>[l(t(r),null,{default:d(()=>e[8]||(e[8]=[u("Date",-1)])),_:1,__:[8]}),l(t(i),{type:"date",modelValue:a.date,"onUpdate:modelValue":e[2]||(e[2]=o=>a.date=o)},null,8,["modelValue"])]),_:1}),l(t(s),{md:"3"},{default:d(()=>[l(t(r),null,{default:d(()=>e[9]||(e[9]=[u("Value",-1)])),_:1,__:[9]}),l(t(i),{type:"number",step:"0.0001",modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value=o)},null,8,["modelValue"])]),_:1}),l(t(s),{md:"12"},{default:d(()=>[l(t(r),null,{default:d(()=>e[10]||(e[10]=[u("Description",-1)])),_:1,__:[10]}),l(t(A),{rows:"3",modelValue:a.description,"onUpdate:modelValue":e[4]||(e[4]=o=>a.description=o),placeholder:"Optional descriptionâ€¦"},null,8,["modelValue"])]),_:1})]),_:1}),I("div",g,[l(t(n),{type:"submit",color:"primary",disabled:!m.value},{default:d(()=>e[11]||(e[11]=[u("Save",-1)])),_:1,__:[11]},8,["disabled"]),l(t(n),{type:"button",color:"secondary",onClick:C},{default:d(()=>e[12]||(e[12]=[u("Reset",-1)])),_:1,__:[12]})])]),_:1})]),_:1})]),_:1})]))}};export{H as default};
