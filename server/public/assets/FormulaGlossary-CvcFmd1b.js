import{C as m}from"./CButton-CxoqXei-.js";import{r as b,n as C,l as P,k as p,b as o,a as s,u as r,e as l,C as _,d as t,c as x,F as w,g as J,t as i,h as k}from"./index-DPzvZzfM.js";import{C as B}from"./CCardHeader-CyVR9a-w.js";import{C as g}from"./CFormInput-BuocEiCo.js";const T={class:"d-flex flex-column gap-3"},V={class:"d-flex justify-content-between align-items-start"},F={class:"fw-semibold"},S={class:"text-muted small"},q={class:"d-flex gap-2"},G={class:"mt-2 mb-0",style:{"white-space":"pre-wrap"}},A={class:"small text-muted mt-1"},R={__name:"FormulaGlossary",emits:["apply"],setup(L,{emit:y}){const f=y,u=b(""),d=b([{name:"Flat Rate Payout",expression:"value * rate",variablesJson:'["rate"]',note:"Pay a fixed multiplier per unit."},{name:"Percent of Value",expression:"value * rate / 100",variablesJson:'["rate"]',note:"Standard percentage commission."},{name:"Percent With Cap",expression:"clamp(value * rate / 100, 0, cap)",variablesJson:'["rate","cap"]',note:"Percentage payout but never exceed a cap."},{name:"Threshold Bonus",expression:"value >= threshold ? bonus : 0",variablesJson:'["threshold","bonus"]',note:"Lump sum when a target is hit."},{name:"Tiered Percent",expression:`value <= tier1 ? value * r1 / 100 :
value <= tier2 ? (tier1 * r1 / 100) + ((value - tier1) * r2 / 100) :
(tier1 * r1 / 100) + ((tier2 - tier1) * r2 / 100) + ((value - tier2) * r3 / 100)`,variablesJson:'["tier1","tier2","r1","r2","r3"]',note:"Higher rates for higher achievement."},{name:"Overachievement Accelerator",expression:`value <= quota ? value * base / 100 :
(value * base / 100) + ((value - quota) * accel / 100)`,variablesJson:'["quota","base","accel"]',note:"Base until quota, then faster."},{name:"Flat Bonus per Unit",expression:"value * bonusPerUnit",variablesJson:'["bonusPerUnit"]',note:"Fixed payout per unit."},{name:"Time-Sensitive Decay",expression:"value * rate / 100 * (1 - (daysSinceStart / decayPeriod))",variablesJson:'["rate","daysSinceStart","decayPeriod"]',note:"Payout decreases over time."},{name:"Minimum Guarantee",expression:"max(minGuarantee, value * rate / 100)",variablesJson:'["minGuarantee","rate"]',note:"Ensure a minimum payout."},{name:"Penalty Deduction",expression:"(value * rate / 100) - penalty",variablesJson:'["rate","penalty"]',note:"Reduce payout by penalties."},{name:"Kicker Bonus",expression:"value >= kickerThreshold ? (value * rate / 100) + kickerBonus : value * rate / 100",variablesJson:'["rate","kickerThreshold","kickerBonus"]',note:"Extra bump for exceeding a big goal."},{name:"Quota Multiplier",expression:"(value / quota) * basePayout",variablesJson:'["quota","basePayout"]',note:"Proportional to quota attainment."},{name:"Cap per Period",expression:"clamp(value * rate / 100, 0, capPerPeriod)",variablesJson:'["rate","capPerPeriod"]',note:"Apply a period cap."},{name:"Multi-Metric Weighted",expression:"((m1 * w1) + (m2 * w2) + (m3 * w3)) * rate / 100",variablesJson:'["m1","m2","m3","w1","w2","w3","rate"]',note:"Weighted score of multiple metrics."},{name:"Growth vs. Last Period",expression:"(value - lastPeriodValue) * rate / 100",variablesJson:'["lastPeriodValue","rate"]',note:"Pay only on growth."},{name:"Retention Bonus",expression:"value >= retentionTarget ? retentionBonus : 0",variablesJson:'["retentionTarget","retentionBonus"]',note:"One-off for retention."},{name:"Penalty if Below Baseline",expression:"value < baseline ? (value * rate / 100) - belowPenalty : value * rate / 100",variablesJson:'["baseline","rate","belowPenalty"]',note:"Dock payouts if below baseline."},{name:"Random Spot Bonus",expression:"(value * rate / 100) + (rand < bonusChance ? bonusAmount : 0)",variablesJson:'["rate","bonusChance","bonusAmount","rand"]',note:"Gamified reward (provide rand 0..1)."},{name:"Cap & Floor",expression:"clamp(value * rate / 100, floor, cap)",variablesJson:'["rate","floor","cap"]',note:"Bound payouts to a range."},{name:"Accelerator Above Threshold Bands",expression:`value <= t1 ? value * r1 / 100 :
value <= t2 ? (t1 * r1 / 100) + ((value - t1) * r2 / 100) :
(t1 * r1 / 100) + ((t2 - t1) * r2 / 100) + ((value - t2) * r3 / 100)`,variablesJson:'["t1","t2","r1","r2","r3"]',note:"Three-band accelerator."}]),h=C(()=>{const n=u.value.trim().toLowerCase();return n?d.value.filter(a=>[a.name,a.expression,a.note].some(e=>e==null?void 0:e.toLowerCase().includes(n))):d.value}),c=async n=>{try{await navigator.clipboard.writeText(n)}catch{}};return(n,a)=>(p(),P(r(k),null,{default:o(()=>[s(r(B),{class:"fw-semibold"},{default:o(()=>a[1]||(a[1]=[l("Formula Glossary",-1)])),_:1,__:[1]}),s(r(_),null,{default:o(()=>[s(r(g),{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),placeholder:"Search formulas...",class:"mb-3"},null,8,["modelValue"]),t("div",T,[(p(!0),x(w,null,J(h.value,e=>(p(),x("div",{key:e.name,class:"border rounded p-3"},[t("div",V,[t("div",null,[t("div",F,i(e.name),1),t("div",S,i(e.note),1)]),t("div",q,[s(r(m),{color:"secondary",size:"sm",onClick:v=>c(e.expression)},{default:o(()=>a[2]||(a[2]=[l("Copy Expr",-1)])),_:2,__:[2]},1032,["onClick"]),s(r(m),{color:"secondary",size:"sm",onClick:v=>c(e.variablesJson)},{default:o(()=>a[3]||(a[3]=[l("Copy Vars",-1)])),_:2,__:[3]},1032,["onClick"]),s(r(m),{color:"primary",size:"sm",onClick:v=>f("apply",{expression:e.expression,variablesJson:e.variablesJson})},{default:o(()=>a[4]||(a[4]=[l(" Use ",-1)])),_:2,__:[4]},1032,["onClick"])])]),t("pre",G,i(e.expression),1),t("div",A,"Vars: "+i(e.variablesJson),1)]))),128))])]),_:1})]),_:1}))}};export{R as _};
